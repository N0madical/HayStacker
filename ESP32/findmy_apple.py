#from machine import base_mac_addr
import bluetooth

public_key = [
    0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xaa,0xbb,0xcc,0xdd,0xef,
    0xfe,0xdd,0xcc,0xbb,0xaa,0x99,0x88,0x77,0x66,0x55,0x44,0x33,0x22,0x11
]

interval_ms = 300
findmy_apple = [
    0x1e, # Length (30)
    0xff, # Manufacturer Specific Data (type 0xff)
    0x4c, 0x00, # Company ID (Apple)
    0x12, 0x19, # Offline Finding type and length
    0x00, # State
] + public_key[-22:] + [
    0x00, # First two bits
    0x00, # Hint (0x00)
]

ble_mac = [0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF]

#ble_mac[-1] -= 2
#base_mac_addr(ble_mac)

ble = bluetooth.BLE()
ble.active(True)
ble.gap_advertise(interval_ms *1000, adv_data=bytes(findmy_apple))
